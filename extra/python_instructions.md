# Гид по питону на кластере

## /usr/bin/python

Системный питон версии 2.7. Не используется в нашем курсе. Устанавливается вместе с системой и используется во многих скриптах системы или внешних программах.

## /usr/bin/python3

Тоже самое, используется для многих компонентов системы и внешних приложений. 

### Как использовать

Вызов в командной строке `/usr/bin/python3` или `python3`
В программе - `#!/usr/bin/python3`

Так как это системный питон, то он содержит только те пакеты, которые нужны приложениям системы, у которых специфические версии. В многопользовательской среде у каждого могут быть свои тердуемые пакеты, а так эе им версии, зачастую кофликтущиею. Поэтому кждый пользователь может устанавливать пакет только в свою собственную домашнюю директорию.

Хороший способ не запутаться в версиях и зависимостфых - работать с виртуальными средами.

### Через virtualenv

`virtualenv p1`

создаст среду и папку p1 c подпапками для файлов проекта - это делается один раз.
Каждый раз, когда вы работаете над проектом p1, просто делайте:

`source p1/bin/activate`

ваша среда будет изолирована он системного питона. и в ней можно устанавливать свои пакеты:

`pip install requests`

Когда работа закончена, или надо перейти в другую среду, вызывайте:

`deactivate`

## /opt/anaconda/envs/bd9/bin/python

Питон из дистрибуции анаконды + все пакеты, испольуемые на программе Биг Дата. Установлен на всех узлах кластера. Это важно, так как в вашей среде вы работаете только на master.

### Как использовать

```
artem.trunov@master:$ conda activate bd9
(bd9) artem.trunov@master:$ 
```
и тогда вы можете вызвать интерпретатор в командной строке как просто `python`. Заметьте, что промпт показывает вам, в какой среде вы находитесь.

в программах, в том числе hadoop streaming: `#!/opt/anaconda/envs/bd9/bin/python` Важно использовать полный путь.

Выйти из среды:

`conda deactivate`

### Менеджер пакетов конда

Установка новых пакетов:

`conda install numpy pandas`

Иногда надо поискать в другом репозитории пакетов:

`conda install -c conda_forge ...`

На худой конец, установит по-старинке, но все равно в пределах вашей среды.

`pip install ...`

## Ссылки

[virtualenv userguide](https://virtualenv.pypa.io/en/stable/userguide/)

[conda user guide](https://conda.io/docs/user-guide/getting-started.html)


